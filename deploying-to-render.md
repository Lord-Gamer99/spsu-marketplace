# Deploying SPSU Marketplace to Render

This guide walks through the process of deploying your SPSU Marketplace application to [Render](https://render.com), a cloud platform that offers free hosting for web services.

## Prerequisites

1. Complete all items in the `deployment-checklist.md`
2. Create a [Render account](https://dashboard.render.com/register)
3. Connect your GitHub/GitLab account or have your code ready to upload

## Step 1: Set Up MongoDB Atlas

1. Sign up for [MongoDB Atlas](https://www.mongodb.com/cloud/atlas/register)
2. Create a new cluster (the free tier is sufficient to start)
3. Create a database user with read/write permissions
4. Add `0.0.0.0/0` to the IP access list (or specific IPs if preferred)
5. Get your MongoDB connection string by clicking "Connect" > "Connect your application"
6. Update your `.env` file:
   ```
   MONGODB_URI=mongodb+srv://<username>:<password>@<cluster>.mongodb.net/SPSU_Marketplace?retryWrites=true&w=majority
   JWT_SECRET=your_secure_secret_key
   PORT=5000
   ```

## Step 2: Prepare Your Repository

1. Make sure your code is in a Git repository
2. Ensure your `package.json` in the root directory has these scripts:
   ```json
   "scripts": {
     "start": "node Server/server.js",
     "install-all": "npm install && cd Client && npm install",
     "build": "cd Client && npm run build",
     "postinstall": "npm run install-all && npm run build"
   }
   ```

3. Run the deployment helper script locally to verify everything is working:
   ```
   node deploy.js
   ```

## Step 3: Deploy to Render

1. Log in to your [Render Dashboard](https://dashboard.render.com/)
2. Click "New +" and select "Web Service"
3. Connect your repository or upload your code
4. Fill in the following details:
   - **Name**: SPSU-Marketplace (or your preferred name)
   - **Environment**: Node
   - **Build Command**: `npm run install-all && npm run build`
   - **Start Command**: `npm start`
   
5. Under "Advanced", add your environment variables:
   - `MONGODB_URI` - Your MongoDB Atlas connection string
   - `JWT_SECRET` - Your secret key for JWT authentication
   - `NODE_ENV` - Set to `production`

6. Choose a plan (the free plan works to start)
7. Click "Create Web Service"

## Step 4: Initial Data Population (Optional)

After deployment is complete, you may need to seed your database:

1. Go to your web service's dashboard on Render
2. Click on "Shell" tab
3. Run the seeder script:
   ```
   node Server/config/seeder.js
   ```
4. Run the collections fix script if needed:
   ```
   node Server/fixCollections.js
   ```

## Step 5: Verify Deployment

1. Once the deployment is complete, click on the URL generated by Render
2. Verify these features are working correctly:
   - User registration and login
   - Product listing and details
   - Cart functionality
   - Checkout process
   - User profile management
   - Admin functionality (if applicable)

3. Test on multiple devices and browsers to ensure responsiveness

## Troubleshooting

If you encounter issues with your deployment, check:

1. **Application logs**: On Render dashboard, go to "Logs" tab
2. **MongoDB connection**: Verify your connection string is correct
3. **Environment variables**: Make sure all required variables are set
4. **Build process**: Check if the client built successfully
5. **API endpoints**: Verify they're working correctly

## Post-Deployment Maintenance

1. Set up [Render's free monitoring](https://render.com/docs/monitoring)
2. Consider upgrading to a paid plan if you need more resources
3. Regularly back up your MongoDB database
4. Monitor your application for errors and performance

## Additional Resources

- [Render Documentation](https://render.com/docs)
- [MongoDB Atlas Documentation](https://docs.atlas.mongodb.com/)
- [Node.js on Render](https://render.com/docs/deploy-node-express-app) 